<!DOCTYPE html>
<html lang="nl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>CodeQuest - Vanilla JS Codering Spel</title>
    <link rel="stylesheet" href="css/styles.css" />
    <!-- CodeMirror 5 (simple, widely compatible) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/theme/material.min.css"
    />
  </head>
  <body>
    <header>
      <h1>CodeQuest â€” Vanilla JS Niveaus</h1>
      <div id="stats">
        <span id="level-badge">Niveau: â€”</span>
        <span id="score-badge">Score: 0</span>
        <span id="time-badge">Tijd: 0s</span>
      </div>
      <div id="progress-wrap">
        <div id="progress-bar"><div id="progress-fill"></div></div>
        <div id="progress-text">0 / 0</div>
      </div>
      <button id="reset-game" title="Alle voortgang opnieuw instellen">Voortgang Opnieuw Instellen</button>
    </header>

    <main>
      <aside id="levels">
        <h2>Niveaus</h2>
        <ul id="levels-list"></ul>
        <div id="badges">
          <h3>Badges</h3>
          <div id="badges-list"></div>
        </div>
      </aside>

      <section id="play-area">
        <div id="level-info">
          <h2 id="level-title">Selecteer een niveau</h2>
          <div id="level-meta" class="card">
            <strong>Wat te doen</strong>
            <p id="level-instructions" class="muted"></p>
            <div
              id="level-example"
              style="
                margin-top: 8px;
                color: #082026;
                font-family: Menlo, Monaco, monospace;
                font-size: 13px;
              "
            ></div>
          </div>
        </div>

        <div id="editor-area">
          <label for="code">Schrijf vanilla JavaScript (geen frameworks)</label>
          <textarea id="code" spellcheck="false"></textarea>
          <div class="editor-footer">
            <div id="attempts" class="muted">Pogingen: 0</div>
            <div id="hint-container" hidden>
              <div id="hint-area" class="muted"></div>
              <button
                id="show-solution"
                style="display: none; background: #ffdb99; color: #000"
              >
                Toon oplossing
              </button>
            </div>
          </div>
          <div class="controls">
            <button id="run">Uitvoeren</button>
            <button id="reset">Opnieuw Instellen</button>
            <span id="message" class="muted"></span>
          </div>
        </div>

        <div id="output-area">
          <h3>Uitvoer</h3>
          <iframe id="sandbox" sandbox="allow-scripts"></iframe>
          <div id="result"></div>
        </div>
      </section>
      <aside id="guides" class="card">
        <h3>Algemene Instructies</h3>
        <ul>
          <li>
            Schrijf alleen vanilla JavaScript â€” geen frameworks of externe imports.
          </li>
          <li>
            Gebruik <code>console.log()</code> om resultaten weer te geven voor de meeste niveaus.
          </li>
          <li>
            U kunt variabelen declareren met <code>var</code>, <code>let</code>,
            of <code>const</code>.
          </li>
          <li>
            Hints verschijnen na 2 mislukte pogingen; oplossingen kunnen na 3 pogingen worden weergegeven.
          </li>
          <li>
            Lees de niveaubeschrijving zorgvuldig â€” kleinere stappen helpen bij het leren.
          </li>
        </ul>
        <hr style="margin: 10px 0; opacity: 0.06" />
        <h4>Tips</h4>
        <ol style="margin: 6px 0 0 18px; color: var(--muted)">
          <li>
            Begin klein: druk waarden af met <code>console.log</code> om codefragmenten te verifiÃ«ren.
          </li>
          <li>
            Gebruik de hint als u vastloopt â€” het geeft je een duw, niet de volledige oplossing (tot 3 pogingen).
          </li>
        </ol>
      </aside>
    </main>

    <!-- Feestmodal + confetti canvas -->
    <div id="celebration" style="display: none">
      <div class="celebration-modal">
        <h2>ðŸŽ‰ Alle niveaus voltooid!</h2>
        <p>
          Goed gedaan â€” je hebt alle niveaus voltooid. Oefen verder om nog beter te worden!
        </p>
        <button id="celebration-close">Sluiten</button>
      </div>
    </div>
    <canvas
      id="confetti-canvas"
      style="
        pointer-events: none;
        position: fixed;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        z-index: 9999;
        display: none;
      "
    ></canvas>

    <!-- CodeMirror scripts (vooraf laden) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/javascript/javascript.min.js"></script>
    <!-- App scripts -->
    <script src="js/app.js"></script>
    <script src="js/reset.js"></script>
  </body>
</html>
