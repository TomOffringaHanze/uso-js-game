<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Vanilla JS Coding Game</title>
    <link rel="stylesheet" href="css/styles.css" />
    <!-- CodeMirror 5 (simple, widely compatible) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/theme/material.min.css"
    />
  </head>
  <body>
    <header>
      <h1>CodeQuest â€” Vanilla JS Levels</h1>
      <div id="stats">
        <span id="level-badge">Level: â€”</span>
        <span id="score-badge">Score: 0</span>
        <span id="time-badge">Time: 0s</span>
      </div>
      <div id="progress-wrap">
        <div id="progress-bar"><div id="progress-fill"></div></div>
        <div id="progress-text">0 / 0</div>
      </div>
      <button id="reset-game" title="Reset all progress">Reset Progress</button>
    </header>

    <main>
      <aside id="levels">
        <h2>Levels</h2>
        <ul id="levels-list"></ul>
        <div id="badges">
          <h3>Badges</h3>
          <div id="badges-list"></div>
        </div>
      </aside>

      <section id="play-area">
        <div id="level-info">
          <h2 id="level-title">Select a level</h2>
          <p id="level-desc"></p>
          <div id="level-meta" class="card">
            <strong>What to do</strong>
            <p id="level-instructions" class="muted">
              Follow the task description above. Use console.log to show answers
              when required.
            </p>
            <div
              id="level-example"
              style="
                margin-top: 8px;
                color: #082026;
                font-family: Menlo, Monaco, monospace;
                font-size: 13px;
              "
            ></div>
          </div>
        </div>

        <div id="editor-area">
          <label for="code">Write vanilla JavaScript (no frameworks)</label>
          <textarea id="code" spellcheck="false"></textarea>
          <div class="editor-footer">
            <div id="attempts" class="muted">Attempts: 0</div>
            <div id="hint-container" hidden>
              <div id="hint-area" class="muted"></div>
              <button
                id="show-solution"
                style="display: none; background: #ffdb99; color: #000"
              >
                Show solution
              </button>
            </div>
          </div>
          <div class="controls">
            <button id="run">Run</button>
            <button id="reset">Reset</button>
            <span id="message" class="muted"></span>
          </div>
        </div>

        <div id="output-area">
          <h3>Output</h3>
          <iframe id="sandbox" sandbox="allow-scripts"></iframe>
          <div id="result"></div>
        </div>
      </section>
      <aside id="guides" class="card">
        <h3>General Instructions</h3>
        <ul>
          <li>
            Write vanilla JavaScript only â€” no frameworks or external imports.
          </li>
          <li>
            Use <code>console.log()</code> to output results for most levels.
          </li>
          <li>
            You may declare variables with <code>var</code>, <code>let</code>,
            or <code>const</code>.
          </li>
          <li>
            Hints appear after 2 failed attempts; solutions can be shown after 3
            attempts.
          </li>
          <li>
            Try to read the level description carefully â€” smaller steps help
            learning.
          </li>
        </ul>
        <hr style="margin: 10px 0; opacity: 0.06" />
        <h4>Tips</h4>
        <ol style="margin: 6px 0 0 18px; color: var(--muted)">
          <li>
            Start small: print values with <code>console.log</code> to verify
            bits of code.
          </li>
          <li>
            Use the hint if stuck â€” it nudges you, not the full solution (until
            3 attempts).
          </li>
        </ol>
      </aside>
    </main>

    <!-- Celebration modal + confetti canvas -->
    <div id="celebration" style="display: none">
      <div class="celebration-modal">
        <h2>ðŸŽ‰ All levels complete!</h2>
        <p>
          Great job â€” you've finished all levels. Keep practicing to get even
          better!
        </p>
        <button id="celebration-close">Close</button>
      </div>
    </div>
    <canvas
      id="confetti-canvas"
      style="
        pointer-events: none;
        position: fixed;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        z-index: 9999;
        display: none;
      "
    ></canvas>

    <!-- CodeMirror scripts (load before app) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/javascript/javascript.min.js"></script>
    <!-- App scripts -->
    <script src="js/app.js"></script>
    <script src="js/reset.js"></script>
  </body>
</html>
